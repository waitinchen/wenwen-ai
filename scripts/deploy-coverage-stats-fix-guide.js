/**
 * 部署 COVERAGE_STATS 意圖修復指南
 * 修復「你商家資料有多少?」回具體商家而非統計數據的問題
 */

console.log(`
🎯 部署 COVERAGE_STATS 意圖修復指南
====================================

📋 問題分析:
❌ 用戶輸入「你商家資料有多少?」卻回具體商家清單
❌ 顯示「3筆」並列出：肯塔基美語、保亭鳳山行政停車場、寶盛鳳山中山東路停車場
❌ 原因: COVERAGE_STATS 意圖優先級不夠高，被其他意圖覆蓋
❌ 結果: 走一般推薦而非統計查詢

✅ 修復方案:

🔧 提高 COVERAGE_STATS 意圖優先級
   📍 位置: IntentLanguageLayer.classifyIntent
   🎯 效果: 將統計查詢移到自我介紹之後，交通指引之前
   📝 信心度: 從 0.9 提升到 0.95

🔧 增強關鍵詞匹配
   📍 位置: statsKeywords 陣列
   🎯 效果: 添加完整查詢短語匹配
   📝 新增: '你商家資料有多少', '商家資料有多少'

🔧 移除重複代碼
   📍 位置: 移除後面的重複統計查詢代碼
   🎯 效果: 避免邏輯衝突

🚀 部署步驟:

1. 登入 Supabase Dashboard
   https://supabase.com/dashboard
   
2. 進入您的專案
   選擇 "wenwen-ai" 專案
   
3. 進入 Edge Functions 頁面
   左側選單 → Edge Functions
   
4. 找到 claude-chat 函數
   點擊 claude-chat 函數
   
5. 部署新代碼
   點擊 "Deploy" 或 "Redeploy" 按鈕
   
6. 等待部署完成
   看到 "Deployed" 狀態

🧪 驗收測試:

運行測試腳本驗證修復:
node scripts/test-coverage-stats-fix.js

預期結果:
- ✅ 「你商家資料有多少?」→ 回統計數據 (280/16/18/1/11)
- ✅ 「你的商家資料有多少資料?」→ 回統計數據
- ✅ 「文山特區有多少家商家？」→ 回統計數據
- ✅ 「資料庫統計」→ 回統計數據
- ✅ 「推薦美食」→ 回店家清單（正常功能不受影響）

📊 修復效果:
- 🎯 意圖識別準確: 統計查詢不再被其他意圖覆蓋
- 📊 正確回傳數據: 顯示 280/16/18/1/11 而非 3筆
- 🚫 避免具體商家: 不再列出具體商家名稱
- ✅ 保持其他功能: 美食推薦等正常功能不受影響

✅ 部署完成後:
- 「你商家資料有多少?」將正確回傳統計數據
- 不再出現具體商家清單的錯誤回應
- 統計查詢功能正常運作
- 系統整體準確性提升

🎉 修復完成！準備部署！
`);

// 顯示修復統計
console.log(`
📈 修復統計:
============
✅ 已完成: COVERAGE_STATS 意圖優先級修復
🎯 意圖識別: 提高優先級和信心度
📝 關鍵詞匹配: 增強完整短語匹配
🔧 代碼清理: 移除重複邏輯

🎉 COVERAGE_STATS 意圖修復完成，系統準備就緒！
`);